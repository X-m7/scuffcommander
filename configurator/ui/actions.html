<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="style.css" />
    <script type="module" src="actions.js"></script>
    <title>Main</title>
  </head>
  <body onload="loadActions()">
    <h1>Actions Configuration</h1>
    <a href="index.html">Back</a>
    <button type="button" onclick="saveAll()">Save Actions</button>
    <p id="saveAllOutput"></p>
    <form name="actionSelect">
      <label>
        Create a new action or select an existing one:
        <select name="action" oninput="chooseAction()">
          <option value="none">Select an option</option>
          <option value="new">Create a new action</option>
        </select>
      </label>
    </form>
    <form name="actionModify" hidden>
      <button type="button" onclick="saveCurrentAction()">Save</button>
      <button type="button" onclick="deleteCurrentAction()">
        Delete currently selected action</button
      ><br />
      <label>
        Action ID:
        <input type="text" name="id" placeholder="No /, ? or #" />
      </label>
      <label>
        Action type:
        <select name="type" oninput="chooseType()">
          <option value="none">Select an option</option>
          <option value="single">Single</option>
          <option value="chain">Chain</option>
          <option value="if">Condition</option>
        </select>
      </label>
    </form>
    <form name="chainAction" hidden>
      <label>
        Action type to add to chain:
        <select name="type" oninput="chooseTypeChain()">
          <option value="none">Select an option</option>
          <option value="single">Single</option>
          <option value="condition">Condition</option>
        </select>
      </label>
      <button type="button" onclick="addToEndOfChain()">Add to end</button>
      <ol id="chainActionList">
        <!-- this is populated via refreshTempChain in ./actions-modules/chain-action.js -->
      </ol>
    </form>
    <form name="conditionAction" hidden>
      <label>
        Plugin:
        <select name="plugin" oninput="queryChoosePlugin()">
          <option value="none">Select an option</option>
          <option value="OBS">OBS</option>
          <option value="VTS">VTube Studio</option>
        </select>
      </label>
      <div id="conditionQueryObs" hidden>
        <label>
          OBS query type:
          <select name="typeObs" oninput="obsQueryChooseType()">
            <option value="none">Select an option</option>
            <option value="CurrentProgramScene">Current Program Scene</option>
          </select>
        </label>
      </div>
      <div id="conditionQueryVts" hidden>
        <label>
          VTube Studio query type:
          <select name="typeVts" oninput="vtsQueryChooseType()">
            <option value="none">Select an option</option>
            <option value="ActiveModelId">Active Model</option>
          </select>
        </label>
      </div>
      <div id="queryInputSelect" hidden>
        <label>
          Query parameter:
          <select name="inputSelect">
            <option value="none">Select an option</option>
          </select>
        </label>
      </div>
      <div>
        <p>Current then action: <span id="conditionCurrentThen"></span></p>
        <p>Current else action: <span id="conditionCurrentElse"></span></p>
      </div>
      <label>
        Action to execute if the above query is true:
        <select name="thenAction">
          <option value="none">Select an existing action to copy</option>
        </select>
      </label>
      <br />
      <label>
        Action to execute otherwise:
        <select name="elseAction">
          <option value="none">Do nothing</option>
        </select>
      </label>
    </form>
    <form name="singleAction" hidden>
      <label>
        Plugin:
        <select name="plugin" oninput="choosePlugin()">
          <option value="none">Select an option</option>
          <option value="General">General</option>
          <option value="OBS">OBS</option>
          <option value="VTS">VTube Studio</option>
        </select>
      </label>
      <div id="generalTypeSelect" hidden>
        <label>
          General action type:
          <select name="typeGeneral" oninput="generalChooseType()">
            <option value="none">Select an option</option>
            <option value="Delay">Delay</option>
          </select>
        </label>
      </div>
      <div id="obsTypeSelect" hidden>
        <label>
          OBS action type:
          <select name="typeObs" oninput="obsChooseType()">
            <option value="none">Select an option</option>
            <option value="ProgramSceneChange">Program Scene Change</option>
          </select>
        </label>
      </div>
      <div id="vtsTypeSelect" hidden>
        <p>
          Note that for the actions specific to a given model (for example
          toggling expressions) the model <strong>must</strong> be loaded in
          VTube Studio before making changes here.
        </p>
        <label>
          VTube Studio action type:
          <select name="typeVts" oninput="vtsChooseType()">
            <option value="none">Select an option</option>
            <option value="ToggleExpression">Toggle Expression</option>
            <option value="LoadModel">Load Model</option>
            <option value="MoveModel">Move Model</option>
          </select>
        </label>
      </div>
      <div id="actionInputSelect" hidden>
        <label>
          Action parameter:
          <select name="inputSelect">
            <option value="none">Select an option</option>
          </select>
        </label>
      </div>
      <div id="actionInputText" hidden>
        <label>
          Action parameter:
          <input type="text" name="inputText" />
        </label>
      </div>
      <div id="vtsModelPositionInput" hidden>
        <label>
          X: <input type="text" name="vtsPosX" placeholder="(-1 to 1)" />
        </label>
        <label>
          Y: <input type="text" name="vtsPosY" placeholder="(-1 to 1)" />
        </label>
        <label>
          Rotation (degrees):
          <input
            type="text"
            name="vtsPosRotation"
            placeholder="(-360 to 360)"
          />
        </label>
        <label>
          Size:
          <input type="text" name="vtsPosSize" placeholder="(-100 to 100)" />
        </label>
        <label>
          Animation time (s):
          <input type="text" name="vtsPosAnimDuration" placeholder="(0 to 2)" />
        </label>
        <br />
        <button type="button" onclick="vtsGetCurrentModelPos()">
          Get current model position
        </button>
      </div>
    </form>
  </body>
</html>
